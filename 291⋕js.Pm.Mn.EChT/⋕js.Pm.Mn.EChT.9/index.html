
<!DOCTYPE html>
<html>
	<head>
	<meta charset="UTF-8">
    <title>â‹•js.Pm.Mn.EChT.9</title>
    <link rel="stylesheet" href="style.css">   
	</head>
	<body>

        
    
	<script>
    
        let employees = [
        {name: 'employee1', age: 30, salary: 400},
        {name: 'employee2', age: 31, salary: 500},
        {name: 'employee3', age: 32, salary: 600},
        ];

        let body = document.querySelector('body');


        function showEmployees (){
            let table = document.createElement('table');
            body.appendChild(table);

            // fill the table of data
            for (let i = 0; i < employees.length; i++){
                let trElem = document.createElement('tr');
                for (let key in employees[i]){
                    let tdElem = document.createElement('td');
                    tdElem.textContent = employees[i][key];
                    trElem.appendChild(tdElem);
                        tdElem.addEventListener('click', editTable);
                }
                deleteRow(trElem);
                table.appendChild(trElem);
            }

            // add a possibility to edit
            function editTable (){
                let inpElem = document.createElement('input');
                inpElem.value = this.textContent;
                this.textContent = '';
                this.appendChild(inpElem);
                let self = this;
                     inpElem.addEventListener('keydown', function(event){
                        if (event.code == 'Enter'){
                           self.textContent = inpElem.value;
                           self.addEventListener('click', editTable);   
                        }
                    }) 
                this.removeEventListener('click', editTable);    
            }

            // add a possibility to delete any row
            function deleteRow (tr){
                let tdElem = document.createElement('td');
                let aElem = document.createElement('a');
                aElem.textContent = 'delete the row';
                aElem.href = '';
                tdElem.appendChild(aElem);
                tr.appendChild(tdElem);
                    aElem.addEventListener('click', function (event){
                        event.preventDefault();
                        tr.remove();
                    })
            }

            // add a possibility to add a new employee
            +function addEmpl (){
                let trNewEmpl = document.createElement('tr');

                let inpName = document.createElement('input');
                inpName.placeholder = 'name';
                body.appendChild(inpName);

                let inpAge = document.createElement('input');
                inpAge.placeholder = 'age';
                body.appendChild(inpAge);

                let inpSalary = document.createElement('input');
                inpSalary.placeholder = 'salary';
                body.appendChild(inpSalary);

                function getData (inp){
                    let tdElem = document.createElement('td');
                        tdElem.addEventListener('click', editTable);
                        tdElem.textContent = inp.value;
                    trNewEmpl.appendChild(tdElem);
                }

                    inpName.addEventListener('keydown', function(event){
                        if (event.code == 'Enter'){
                            getData(inpName);
                            inpAge.focus();
                        }
                    })

                    inpAge.addEventListener('keydown', function(event){
                        if (event.code == 'Enter'){
                            getData(inpAge);
                            inpSalary.focus();
                        }
                    })

                    inpSalary.addEventListener('keydown', function(event){
                        if (event.code == 'Enter'){
                            getData(inpSalary);
                            table.appendChild(trNewEmpl);
                            deleteRow(trNewEmpl);
                        }
                    })
            }();

        }

        showEmployees();
        

	</script>
    
	</body>
</html>

